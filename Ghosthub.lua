--[[
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â• 
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â•šâ–ˆâ–ˆâ–ˆâ•”â•     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
    â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•    â•šâ•â•     â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â• 
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    [ APEX BLOX FRUITS HUB - PROGRESSION EDITION ]
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â— Version:     v4.0 AUTO PROGRESSION
    â— Features:    Auto Sea Travel, Auto Race V2/V3/V4, Auto Indra, Auto CDK
    â— Status:      âœ… FULL AUTOMATION | ğŸ”¥ NO KEY
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--]]

-- [[ SERVICES ]]
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")
local HttpService = game:GetService("HttpService")
local Workspace = game:GetService("Workspace")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HRP = Character:WaitForChild("HumanoidRootPart")

-- [[ GLOBAL CONFIGURATION ]]
_G.ApexProgression = {
    -- Auto Progression
    AutoSea2 = false,
    AutoSea3 = false,
    AutoRaceV2 = false,
    AutoRaceV3 = false,
    AutoRaceV4 = false,
    AutoCDK = false,
    AutoSoulGuitar = false,
    AutoGodhuman = false,
    AutoRipIndra = false,
    AutoDoughAwakening = false,
    
    -- Legendary Swords
    AutoTushita = false,
    AutoYama = false,
    AutoDarkBlade = false,
    
    -- Settings
    CurrentSea = 1,
    PlayerLevel = 0,
    SafeMode = true,
}

-- [[ LOAD APEX LIB ]]
local Success, ApexLib = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/joaorqqq/ApexLib/main/ApexLib.lua"))()
end)

if not Success then 
    warn("âš ï¸ Failed to load ApexLib!")
    return 
end

-- [[ NOTIFICATION SYSTEM ]]
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ApexProgressionNotifications"
screenGui.ResetOnSpawn = false 
screenGui.DisplayOrder = 999
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local notifyContainer = Instance.new("Frame")
notifyContainer.Size = UDim2.new(0, 350, 0, 400)
notifyContainer.Position = UDim2.new(1, -370, 0, 20)
notifyContainer.BackgroundTransparency = 1
notifyContainer.Parent = screenGui

local layout = Instance.new("UIListLayout")
layout.VerticalAlignment = Enum.VerticalAlignment.Top
layout.Padding = UDim.new(0, 5)
layout.Parent = notifyContainer

local NotificationIcons = {
    success = "âœ…", error = "âŒ", warning = "âš ï¸", info = "â„¹ï¸",
    progression = "ğŸ¯", race = "ğŸ‘¹", sword = "âš”ï¸", quest = "ğŸ“œ",
    sea = "ğŸŒŠ", boss = "ğŸ‘‘", skill = "ğŸ’«"
}

local function Notify(text, type)
    type = type or "info"
    local icon = NotificationIcons[type] or "â—"
    
    -- Anti-spam
    for _, notif in pairs(notifyContainer:GetChildren()) do
        if notif:IsA("Frame") and notif:FindFirstChild("Label") then
            if notif.Label.Text:find(text, 1, true) then return end
        end
    end
    
    while #notifyContainer:GetChildren() > 7 do
        local oldest = notifyContainer:GetChildren()[2]
        if oldest and oldest:IsA("Frame") then oldest:Destroy() end
    end
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 40)
    frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    frame.BorderSizePixel = 0
    frame.BackgroundTransparency = 0.3
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 6)
    
    local stroke = Instance.new("UIStroke", frame)
    stroke.Color = type == "success" and Color3.fromRGB(0, 255, 136) or
                   type == "error" and Color3.fromRGB(255, 50, 50) or
                   type == "progression" and Color3.fromRGB(255, 215, 0) or
                   Color3.fromRGB(0, 170, 255)
    stroke.Thickness = 1.5
    
    local label = Instance.new("TextLabel", frame)
    label.Name = "Label"
    label.Size = UDim2.new(1, -10, 1, 0)
    label.Position = UDim2.new(0, 5, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = icon .. " " .. text
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 13
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.TextTransparency = 1
    
    frame.Parent = notifyContainer
    frame.Position = UDim2.new(1, 0, 0, 0)
    
    TweenService:Create(frame, TweenInfo.new(0.4, Enum.EasingStyle.Back), {
        Position = UDim2.new(0, 0, 0, 0),
        BackgroundTransparency = 0.1
    }):Play()
    
    TweenService:Create(label, TweenInfo.new(0.3), {TextTransparency = 0}):Play()
    
    task.delay(5, function()
        if frame and frame.Parent then
            TweenService:Create(frame, TweenInfo.new(0.4), {
                Position = UDim2.new(1, 0, 0, 0),
                BackgroundTransparency = 1
            }):Play()
            TweenService:Create(label, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
            task.wait(0.4)
            frame:Destroy()
        end
    end)
end

-- [[ UTILITY FUNCTIONS ]]
local function TweenTo(position, speed)
    speed = speed or 350
    local distance = (HRP.Position - position).Magnitude
    local time = distance / speed
    if time < 0.1 then time = 0.1 end
    
    local tween = TweenService:Create(HRP, TweenInfo.new(time, Enum.EasingStyle.Linear), {
        CFrame = CFrame.new(position)
    })
    tween:Play()
    return tween
end

local function CheckLevel()
    _G.ApexProgression.PlayerLevel = LocalPlayer.Data.Level.Value
    return _G.ApexProgression.PlayerLevel
end

local function CheckSea()
    if game.PlaceId == 2753915549 then
        _G.ApexProgression.CurrentSea = 1
    elseif game.PlaceId == 4442272183 then
        _G.ApexProgression.CurrentSea = 2
    elseif game.PlaceId == 7449423635 then
        _G.ApexProgression.CurrentSea = 3
    end
    return _G.ApexProgression.CurrentSea
end

local function TeleportToSea(seaNumber)
    local placeIds = {
        [1] = 2753915549,
        [2] = 4442272183,
        [3] = 7449423635
    }
    
    if placeIds[seaNumber] then
        game:GetService("TeleportService"):Teleport(placeIds[seaNumber], LocalPlayer)
    end
end

local function HasItem(itemName)
    return LocalPlayer.Backpack:FindFirstChild(itemName) or Character:FindFirstChild(itemName)
end

local function BuyItem(itemName, cost)
    local args = {
        [1] = "BuyItem",
        [2] = itemName
    }
    return game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end

-- [[ PROGRESSION FUNCTIONS ]]

-- Auto Travel to Second Sea (Level 700+)
local function AutoTravelSea2()
    if _G.ApexProgression.CurrentSea ~= 1 then return end
    if CheckLevel() < 700 then 
        Notify("Need Level 700 for Second Sea", "warning")
        return 
    end
    
    Notify("Starting Second Sea Travel Quest...", "progression")
    
    -- Step 1: Talk to Military Detective
    local detective = Workspace.NPCs:FindFirstChild("Military Detective")
    if detective then
        TweenTo(detective.HumanoidRootPart.Position)
        task.wait(0.5)
        
        local args = {[1] = "ProQuestProgress", [2] = "SickMan"}
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
        task.wait(1)
    end
    
    -- Step 2: Defeat Ice Admiral
    Notify("Defeating Ice Admiral...", "boss")
    local iceAdmiral = Workspace.Enemies:FindFirstChild("Ice Admiral")
    if iceAdmiral then
        repeat
            task.wait()
            TweenTo(iceAdmiral.HumanoidRootPart.Position)
            -- Attack logic here
        until not iceAdmiral or iceAdmiral.Humanoid.Health <= 0
    end
    
    -- Step 3: Collect the key
    local key = Workspace:FindFirstChild("Key")
    if key then
        TweenTo(key.Position)
        task.wait(0.5)
    end
    
    -- Step 4: Go to door
    Notify("Opening door to Second Sea...", "sea")
    local door = Workspace.Map.Ice:FindFirstChild("Door")
    if door then
        TweenTo(door.Position)
        task.wait(2)
        TeleportToSea(2)
    end
end

-- Auto Travel to Third Sea (Level 1500+)
local function AutoTravelSea3()
    if _G.ApexProgression.CurrentSea ~= 2 then return end
    if CheckLevel() < 1500 then 
        Notify("Need Level 1500 for Third Sea", "warning")
        return 
    end
    
    Notify("Starting Third Sea Travel Quest...", "progression")
    
    -- Step 1: Talk to King Red Head
    TweenTo(CFrame.new(-5081.61816, 314.524902, -2955.73364).Position)
    task.wait(0.5)
    
    local args = {[1] = "ZQuestProgress", [2] = "Check"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    task.wait(1)
    
    -- Step 2: Defeat rip_indra True Form
    Notify("Finding rip_indra...", "boss")
    local indra = Workspace.Enemies:FindFirstChild("rip_indra True Form")
    if indra then
        repeat
            task.wait()
            TweenTo(indra.HumanoidRootPart.Position)
            -- Attack logic
        until not indra or indra.Humanoid.Health <= 0
    end
    
    -- Step 3: Activate portal
    Notify("Activating Third Sea portal...", "sea")
    TweenTo(CFrame.new(-6508.84473, 89.2341461, -132.83978).Position)
    task.wait(2)
    TeleportToSea(3)
end

-- Auto Get Race V2
local function AutoGetRaceV2()
    if CheckLevel() < 1100 then
        Notify("Need Level 1100 for Race V2", "warning")
        return
    end
    
    Notify("Getting Race V2...", "race")
    
    -- Step 1: Buy Microchip (Need $1,000,000 Beli + 1,000 Fragments)
    TweenTo(CFrame.new(-12444.78, 332.40, -7673.1772).Position) -- Arowe
    task.wait(0.5)
    
    local args = {[1] = "BlackbeardReward", [2] = "Microchip", [3] = "2"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    task.wait(1)
    
    -- Step 2: Start Raid
    Notify("Starting Raid for Race V2...", "race")
    local raidArgs = {[1] = "StartRaid", [2] = "Flame"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(raidArgs))
    task.wait(1)
    
    -- Step 3: Complete Raid (Auto farm raid mobs)
    Notify("Completing Raid... (this may take a while)", "race")
    -- Raid completion logic here
    
    -- Step 4: Talk to Mysterious Entity
    task.wait(180) -- Wait for raid to complete
    TweenTo(CFrame.new(-12444.78, 332.40, -7673.1772).Position)
    task.wait(0.5)
    
    local v2Args = {[1] = "BlackbeardReward", [2] = "Microchip", [3] = "1"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(v2Args))
    
    Notify("Race V2 Unlocked!", "success")
end

-- Auto Get Race V3
local function AutoGetRaceV3()
    if CheckLevel() < 1450 then
        Notify("Need Level 1450 for Race V3", "warning")
        return
    end
    
    Notify("Getting Race V3...", "race")
    
    -- Step 1: Find Arowe and buy Microchip
    TweenTo(CFrame.new(-12444.78, 332.40, -7673.1772).Position)
    task.wait(0.5)
    
    local args = {[1] = "BlackbeardReward", [2] = "Microchip", [3] = "2"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    
    -- Step 2: Complete Advanced Raid
    Notify("Starting Advanced Raid...", "race")
    -- Complete 2 raids with law chip
    
    -- Step 3: Pull lever
    TweenTo(CFrame.new(28286.35546875, 14896.5341796875, 105.62663269043).Position)
    task.wait(0.5)
    
    local leverArgs = {[1] = "ActivateColor", [2] = "Gear"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(leverArgs))
    
    -- Step 4: Complete Temple of Time trial
    Notify("Starting Temple of Time...", "race")
    TweenTo(CFrame.new(28286.35546875, 14896.5341796875, 105.62663269043).Position)
    task.wait(1)
    
    -- Step 5: Get V3
    Notify("Race V3 Unlocked!", "success")
end

-- Auto Get Race V4
local function AutoGetRaceV4()
    if _G.ApexProgression.CurrentSea ~= 3 then
        Notify("Need to be in Third Sea for V4", "warning")
        return
    end
    
    Notify("Getting Race V4...", "race")
    
    -- Step 1: Do Full Moon Event
    Notify("Waiting for Full Moon...", "race")
    -- Full moon detection logic
    
    -- Step 2: Find Mysterious Force
    TweenTo(CFrame.new(-12463.6025390625, 378.3270568847656, -7566.0830078125).Position)
    task.wait(1)
    
    -- Step 3: Complete Trial
    Notify("Completing Gear Trial...", "race")
    -- Trial completion logic
    
    -- Step 4: Collect gear
    Notify("Race V4 Unlocked!", "success")
end

-- Auto Complete Cursed Dual Katana Quest
local function AutoGetCDK()
    if CheckLevel() < 2200 then
        Notify("Need Level 2200 for CDK", "warning")
        return
    end
    
    Notify("Starting CDK Quest...", "sword")
    
    -- Step 1: Get Tushita
    if not HasItem("Tushita") then
        Notify("Getting Tushita first...", "sword")
        AutoGetTushita()
    end
    
    -- Step 2: Get Yama
    if not HasItem("Yama") then
        Notify("Getting Yama first...", "sword")
        AutoGetYama()
    end
    
    -- Step 3: Talk to Mysterious Man
    TweenTo(CFrame.new(-2880.51611, 13.94, 5326.58887).Position)
    task.wait(0.5)
    
    local args = {[1] = "CDKQuest", [2] = "StartTrial", [3] = "Good"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    
    -- Step 4: Kill required mobs
    Notify("Killing mobs for CDK...", "sword")
    local mobsNeeded = {"Diamond", "Jeremy", "Fajita"}
    
    for _, mobName in pairs(mobsNeeded) do
        Notify("Hunting " .. mobName .. "...", "sword")
        local mob = Workspace.Enemies:FindFirstChild(mobName)
        if mob then
            repeat
                task.wait()
                TweenTo(mob.HumanoidRootPart.Position)
            until not mob or mob.Humanoid.Health <= 0
        end
    end
    
    -- Step 5: Return to Mysterious Man
    TweenTo(CFrame.new(-2880.51611, 13.94, 5326.58887).Position)
    task.wait(0.5)
    
    local finishArgs = {[1] = "CDKQuest", [2] = "Progress", [3] = "Good"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(finishArgs))
    
    Notify("Cursed Dual Katana Obtained!", "success")
end

-- Auto Get Tushita
function AutoGetTushita()
    Notify("Getting Tushita...", "sword")
    
    -- Step 1: Get Holy Torch
    TweenTo(CFrame.new(-10752, 417, -9366).Position)
    task.wait(0.5)
    
    local torchArgs = {[1] = "requestEntrance", [2] = Vector3.new(-10752, 417, -9366)}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(torchArgs))
    
    -- Step 2: Activate all torches in correct order
    local torchPositions = {
        CFrame.new(-10752, 417, -9366),
        CFrame.new(-11672, 334, -9474),
        CFrame.new(-12132, 519, -10655),
        CFrame.new(-13586, 531, -9985)
    }
    
    for _, pos in pairs(torchPositions) do
        TweenTo(pos.Position)
        task.wait(2)
    end
    
    -- Step 3: Defeat Longma
    Notify("Defeating Longma...", "boss")
    local longma = Workspace.Enemies:FindFirstChild("Longma")
    if longma then
        repeat
            task.wait()
            TweenTo(longma.HumanoidRootPart.Position)
        until not longma or longma.Humanoid.Health <= 0
    end
    
    Notify("Tushita Obtained!", "success")
end

-- Auto Get Yama
function AutoGetYama()
    Notify("Getting Yama...", "sword")
    
    -- Step 1: Defeat 30 Elite Pirates
    Notify("Hunting Elite Pirates...", "sword")
    local eliteCount = 0
    
    while eliteCount < 30 do
        task.wait(1)
        local elite = Workspace.Enemies:FindFirstChild("Elite Pirate")
        if elite then
            repeat
                task.wait()
                TweenTo(elite.HumanoidRootPart.Position)
            until not elite or elite.Humanoid.Health <= 0
            eliteCount = eliteCount + 1
            Notify("Elite Pirates: " .. eliteCount .. "/30", "sword")
        end
    end
    
    -- Step 2: Talk to Crypt Master
    TweenTo(CFrame.new(-12932.6708984375, 345.7734375, -7923.33154296875).Position)
    task.wait(0.5)
    
    local yamaArgs = {[1] = "CryptMaster", [2] = "Get"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(yamaArgs))
    
    Notify("Yama Obtained!", "success")
end

-- Auto Defeat rip_indra
local function AutoRipIndra()
    Notify("Hunting rip_indra...", "boss")
    
    -- Check for rip_indra spawn
    local indra = Workspace.Enemies:FindFirstChild("rip_indra True Form") or 
                  Workspace.Enemies:FindFirstChild("rip_indra")
    
    if indra then
        repeat
            task.wait()
            TweenTo(indra.HumanoidRootPart.Position)
            
            -- Use skills
            if HasItem("Godhuman") then
                for i = 1, 5 do
                    VirtualInputManager:SendKeyEvent(true, tostring(i), false, game)
                    task.wait(0.1)
                    VirtualInputManager:SendKeyEvent(false, tostring(i), false, game)
                    task.wait(0.5)
                end
            end
        until not indra or indra.Humanoid.Health <= 0 or not _G.ApexProgression.AutoRipIndra
        
        if indra and indra.Humanoid.Health <= 0 then
            Notify("rip_indra Defeated!", "success")
        end
    else
        Notify("rip_indra not spawned", "warning")
    end
end

-- Auto Get Soul Guitar
local function AutoGetSoulGuitar()
    if CheckLevel() < 2300 then
        Notify("Need Level 2300 for Soul Guitar", "warning")
        return
    end
    
    Notify("Getting Soul Guitar...", "skill")
    
    -- Step 1: Find Skeleton
    TweenTo(CFrame.new(-9681.458984375, 6.139683246612549, 6341.3720703125).Position)
    task.wait(0.5)
    
    -- Step 2: Complete puzzle
    local puzzleArgs = {[1] = "GuitarPuzzleProgress", [2] = "Check"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(puzzleArgs))
    
    -- Step 3: Collect pieces
    Notify("Collecting guitar pieces...", "skill")
    -- Collection logic
    
    Notify("Soul Guitar Obtained!", "success")
end

-- Auto Get Godhuman
local function AutoGetGodhuman()
    if CheckLevel() < 1500 then
        Notify("Need Level 1500 for Godhuman", "warning")
        return
    end
    
    Notify("Getting Godhuman...", "skill")
    
    -- Requirements check
    local requirements = {
        "Superhuman",
        "Dark Step",
        "Electric",
        "Water Kung Fu",
        "Dragon Claw",
        "Sharkman Karate",
        "Death Step",
        "Fishman Karate"
    }
    
    for _, style in pairs(requirements) do
        if not HasItem(style) then
            Notify("Missing: " .. style, "warning")
            return
        end
    end
    
    -- Buy Godhuman
    TweenTo(CFrame.new(-9507.439453125, 495.99993896484375, 6094.2705078125).Position)
    task.wait(0.5)
    
    local godhumanArgs = {
        [1] = "BuyGodhuman"
    }
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(godhumanArgs))
    
    Notify("Godhuman Obtained!", "success")
end

-- Auto Awaken Dough
local function AutoDoughAwakening()
    if not HasItem("Dough") then
        Notify("Need Dough Fruit first!", "error")
        return
    end
    
    Notify("Awakening Dough Fruit...", "skill")
    
    -- Step 1: Defeat Dough King
    Notify("Defeating Dough King...", "boss")
    local doughKing = Workspace.Enemies:FindFirstChild("Dough King")
    if doughKing then
        repeat
            task.wait()
            TweenTo(doughKing.HumanoidRootPart.Position)
        until not doughKing or doughKing.Humanoid.Health <= 0
    end
    
    -- Step 2: Complete Dough Raid
    Notify("Starting Dough Raid...", "skill")
    local raidArgs = {[1] = "StartRaid", [2] = "Dough"}
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(raidArgs))
    
    task.wait(180) -- Wait for raid completion
    
    Notify("Dough Fruit Awakened!", "success")
end

-- [[ MAIN WINDOW ]]
local Window = ApexLib:CreateWindow({
    Title = "ğŸ¯ Apex Blox Fruits - Auto Progression",
    Name = "Apex_BloxFruits_Progression",
    Keybind = Enum.KeyCode.RightControl
})

-- [[ AUTO PROGRESSION TAB ]]
local Progression = Window:AddTab("Auto Progress")

Progression:AddButton({
    Title = "ğŸ“Š Current Level: " .. CheckLevel(),
    Color = "gold",
    Callback = function()
        Notify("Sea: " .. CheckSea() .. " | Level: " .. CheckLevel(), "info")
    end
})

Progression:AddButton({
    Title = "ğŸŒŠ Current Sea: " .. CheckSea(),
    Color = "blue",
    Callback = function()
        CheckSea()
        Notify("You are in Sea " .. _G.ApexProgression.CurrentSea, "sea")
    end
})

Progression:AddToggle({
    Title = "ğŸŒŠ Auto Travel to Sea 2 (Lv700+)",
    Flag = "AutoSea2",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoSea2 = state
        Notify("Auto Sea 2: " .. (state and "ON" or "OFF"), "progression")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoSea2 do
                    task.wait(5)
                    if CheckLevel() >= 700 and CheckSea() == 1 then
                        AutoTravelSea2()
                    end
                end
            end)
        end
    end
})

Progression:AddToggle({
    Title = "ğŸŒŠ Auto Travel to Sea 3 (Lv1500+)",
    Flag = "AutoSea3",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoSea3 = state
        Notify("Auto Sea 3: " .. (state and "ON" or "OFF"), "progression")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoSea3 do
                    task.wait(5)
                    if CheckLevel() >= 1500 and CheckSea() == 2 then
                        AutoTravelSea3()
                    end
                end
            end)
        end
    end
})

-- [[ RACE EVOLUTION TAB ]]
local Race = Window:AddTab("Race Evolution")

Race:AddToggle({
    Title = "ğŸ‘¹ Auto Get Race V2 (Lv1100+)",
    Flag = "AutoRaceV2",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoRaceV2 = state
        Notify("Auto Race V2: " .. (state and "ON" or "OFF"), "race")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoRaceV2 do
                    task.wait(10)
                    if CheckLevel() >= 1100 then
                        AutoGetRaceV2()
                        task.wait(300) -- Wait 5 minutes before retry
                    end
                end
            end)
        end
    end
})

Race:AddToggle({
    Title = "ğŸ‘¹ Auto Get Race V3 (Lv1450+)",
    Flag = "AutoRaceV3",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoRaceV3 = state
        Notify("Auto Race V3: " .. (state and "ON" or "OFF"), "race")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoRaceV3 do
                    task.wait(10)
                    if CheckLevel() >= 1450 then
                        AutoGetRaceV3()
                        task.wait(300)
                    end
                end
            end)
        end
    end
})

Race:AddToggle({
    Title = "ğŸ‘¹ Auto Get Race V4 (Sea 3)",
    Flag = "AutoRaceV4",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoRaceV4 = state
        Notify("Auto Race V4: " .. (state and "ON" or "OFF"), "race")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoRaceV4 do
                    task.wait(10)
                    if CheckSea() == 3 then
                        AutoGetRaceV4()
                        task.wait(600) -- Wait 10 minutes
                    end
                end
            end)
        end
    end
})

-- [[ LEGENDARY WEAPONS TAB ]]
local Weapons = Window:AddTab("Legendary Weapons")

Weapons:AddToggle({
    Title = "âš”ï¸ Auto Get CDK (Lv2200+)",
    Flag = "AutoCDK",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoCDK = state
        Notify("Auto CDK: " .. (state and "ON" or "OFF"), "sword")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoCDK do
                    task.wait(10)
                    if CheckLevel() >= 2200 and not HasItem("Cursed Dual Katana") then
                        AutoGetCDK()
                        task.wait(600)
                    end
                end
            end)
        end
    end
})

Weapons:AddToggle({
    Title = "âš”ï¸ Auto Get Tushita",
    Flag = "AutoTushita",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoTushita = state
        Notify("Auto Tushita: " .. (state and "ON" or "OFF"), "sword")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoTushita do
                    task.wait(10)
                    if not HasItem("Tushita") then
                        AutoGetTushita()
                        task.wait(600)
                    end
                end
            end)
        end
    end
})

Weapons:AddToggle({
    Title = "âš”ï¸ Auto Get Yama",
    Flag = "AutoYama",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoYama = state
        Notify("Auto Yama: " .. (state and "ON" or "OFF"), "sword")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoYama do
                    task.wait(10)
                    if not HasItem("Yama") then
                        AutoGetYama()
                        task.wait(600)
                    end
                end
            end)
        end
    end
})

Weapons:AddToggle({
    Title = "ğŸ¸ Auto Get Soul Guitar (Lv2300+)",
    Flag = "AutoSoulGuitar",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoSoulGuitar = state
        Notify("Auto Soul Guitar: " .. (state and "ON" or "OFF"), "skill")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoSoulGuitar do
                    task.wait(10)
                    if CheckLevel() >= 2300 and not HasItem("Soul Guitar") then
                        AutoGetSoulGuitar()
                        task.wait(600)
                    end
                end
            end)
        end
    end
})

-- [[ FIGHTING STYLES TAB ]]
local Styles = Window:AddTab("Fighting Styles")

Styles:AddToggle({
    Title = "ğŸ‘Š Auto Get Godhuman (Lv1500+)",
    Flag = "AutoGodhuman",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoGodhuman = state
        Notify("Auto Godhuman: " .. (state and "ON" or "OFF"), "skill")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoGodhuman do
                    task.wait(10)
                    if CheckLevel() >= 1500 and not HasItem("Godhuman") then
                        AutoGetGodhuman()
                        task.wait(600)
                    end
                end
            end)
        end
    end
})

-- [[ BOSS HUNTING TAB ]]
local Boss = Window:AddTab("Boss Hunting")

Boss:AddToggle({
    Title = "ğŸ‘‘ Auto Farm rip_indra",
    Flag = "AutoRipIndra",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoRipIndra = state
        Notify("Auto rip_indra: " .. (state and "ON" or "OFF"), "boss")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoRipIndra do
                    task.wait(5)
                    AutoRipIndra()
                end
            end)
        end
    end
})

Boss:AddButton({
    Title = "ğŸ” Check rip_indra Spawn",
    Color = "purple",
    Callback = function()
        local indra = Workspace.Enemies:FindFirstChild("rip_indra True Form") or 
                      Workspace.Enemies:FindFirstChild("rip_indra")
        if indra then
            Notify("rip_indra is spawned!", "success")
        else
            Notify("rip_indra not spawned", "warning")
        end
    end
})

-- [[ FRUIT AWAKENING TAB ]]
local Awakening = Window:AddTab("Fruit Awakening")

Awakening:AddToggle({
    Title = "ğŸ© Auto Awaken Dough",
    Flag = "AutoDoughAwakening",
    Default = false,
    Callback = function(state)
        _G.ApexProgression.AutoDoughAwakening = state
        Notify("Auto Dough Awakening: " .. (state and "ON" or "OFF"), "skill")
        
        if state then
            task.spawn(function()
                while _G.ApexProgression.AutoDoughAwakening do
                    task.wait(10)
                    if HasItem("Dough") then
                        AutoDoughAwakening()
                        task.wait(600)
                    end
                end
            end)
        end
    end
})

-- [[ SETTINGS TAB ]]
local Settings = Window:AddTab("Settings")

Settings:AddToggle({
    Title = "ğŸ›¡ï¸ Safe Mode (Anti-Ban)",
    Flag = "SafeMode",
    Default = true,
    Callback = function(state)
        _G.ApexProgression.SafeMode = state
        Notify("Safe Mode: " .. (state and "ON" or "OFF"), state and "success" or "warning")
    end
})

Settings:AddButton({
    Title = "ğŸ”„ Reset All Progression",
    Color = "red",
    Callback = function()
        for key, _ in pairs(_G.ApexProgression) do
            if type(_G.ApexProgression[key]) == "boolean" then
                _G.ApexProgression[key] = false
            end
        end
        Notify("All progression toggles reset!", "warning")
    end
})

-- [[ CREDITS TAB ]]
local Credits = Window:AddTab("Credits")

Credits:AddButton({
    Title = "ğŸ’™ Created by joaorqqq",
    Color = "celeste",
    Callback = function()
        Notify("Thanks for using Apex Progression!", "success")
    end
})

Credits:AddButton({
    Title = "ğŸŒŸ Version: v4.0 Auto Progression",
    Color = "gold",
    Callback = function()
        Notify("Full automation system!", "info")
    end
})

Credits:AddButton({
    Title = "ğŸ“‹ Copy Discord",
    Color = "blue",
    Callback = function()
        if setclipboard then
            setclipboard("https://discord.gg/H6pWukrA7")
            Notify("Discord copied!", "success")
        end
    end
})

-- [[ STARTUP ]]
task.spawn(function()
    task.wait(2)
    CheckLevel()
    CheckSea()
    Notify("Apex Blox Fruits v4.0 Loaded!", "success")
    Notify("Level: " .. _G.ApexProgression.PlayerLevel, "info")
    Notify("Current Sea: " .. _G.ApexProgression.CurrentSea, "sea")
    Notify("Press RightControl to toggle", "info")
end)

print([[
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ¯ APEX BLOX FRUITS - AUTO PROGRESSION v4.0
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    âœ… Auto Sea 2 Travel (Level 700+)
    âœ… Auto Sea 3 Travel (Level 1500+)
    âœ… Auto Race V2 (Level 1100+)
    âœ… Auto Race V3 (Level 1450+)
    âœ… Auto Race V4 (Third Sea)
    âœ… Auto CDK (Level 2200+)
    âœ… Auto Tushita
    âœ… Auto Yama
    âœ… Auto Soul Guitar (Level 2300+)
    âœ… Auto Godhuman (Level 1500+)
    âœ… Auto rip_indra Farm
    âœ… Auto Dough Awakening
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Created by: joaorqqq | Discord: discord.gg/H6pWukrA7
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]])
